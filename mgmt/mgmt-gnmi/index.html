<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A customer-friendly blueprint for bulding Datacenter fabrics with Nokia SR Linux"><meta name=author content="Global Webscale Team"><link href=https://jerrodgerth.github.io/dc-blueprint/mgmt/mgmt-gnmi/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2, mkdocs-material-7.1.7"><title>gNMI - Datacenter Blueprint</title><link rel=stylesheet href=../../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.f1a3b89f.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#fabric-management class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Datacenter Blueprint" class="md-header__button md-logo" aria-label="Datacenter Blueprint" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Datacenter Blueprint </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> gNMI </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jerrodgerth/dc-blueprint/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> jerrodgerth/dc-blueprint </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Datacenter Blueprint" class="md-nav__button md-logo" aria-label="Datacenter Blueprint" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Datacenter Blueprint </label> <div class=md-nav__source> <a href=https://github.com/jerrodgerth/dc-blueprint/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> jerrodgerth/dc-blueprint </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 data-md-state=indeterminate type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Fabric Design <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Fabric Design" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Fabric Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fabric/fabric-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../fabric/fabric-considerations/ class=md-nav__link> Considerations </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 data-md-state=indeterminate type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Examples data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fabric/examples/example-3stage/ class=md-nav__link> 3-stage Clos </a> </li> <li class=md-nav__item> <a href=../../fabric/examples/example-5stage/ class=md-nav__link> 5-stage Clos </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 data-md-state=indeterminate type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Fabric Routing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Fabric Routing" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Fabric Routing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../routing/routing-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../routing/protocols/ class=md-nav__link> Protocol Selection </a> </li> <li class=md-nav__item> <a href=../../routing/bgp-design/ class=md-nav__link> BGP Design </a> </li> <li class=md-nav__item> <a href=../../routing/bgp-config/ class=md-nav__link> BGP Configuration </a> </li> <li class=md-nav__item> <a href=../../routing/summary/ class=md-nav__link> Summary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Fabric Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Fabric Management" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Fabric Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mgmt-intro/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../mgmt-ztp/ class=md-nav__link> ZTP </a> </li> <li class=md-nav__item> <a href=../mgmt-cli/ class=md-nav__link> CLI </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> gNMI <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> gNMI </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#gnmi class=md-nav__link> gNMI </a> <nav class=md-nav aria-label=gNMI> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#gnmi-subscription class=md-nav__link> gNMI Subscription </a> </li> <li class=md-nav__item> <a href=#gnmi-server-configuration class=md-nav__link> gNMI Server Configuration </a> </li> <li class=md-nav__item> <a href=#gnmi-examples class=md-nav__link> gNMI Examples </a> <nav class=md-nav aria-label="gNMI Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-example class=md-nav__link> GET Example </a> </li> <li class=md-nav__item> <a href=#set-example class=md-nav__link> SET Example </a> </li> <li class=md-nav__item> <a href=#subscribe-once-example class=md-nav__link> SUBSCRIBE once Example </a> </li> <li class=md-nav__item> <a href=#subscribe-on_change-example class=md-nav__link> SUBSCRIBE on_change Example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../mgmt-logging/ class=md-nav__link> Logging </a> </li> <li class=md-nav__item> <a href=../mgmt-summary/ class=md-nav__link> Summary </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#gnmi class=md-nav__link> gNMI </a> <nav class=md-nav aria-label=gNMI> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#gnmi-subscription class=md-nav__link> gNMI Subscription </a> </li> <li class=md-nav__item> <a href=#gnmi-server-configuration class=md-nav__link> gNMI Server Configuration </a> </li> <li class=md-nav__item> <a href=#gnmi-examples class=md-nav__link> gNMI Examples </a> <nav class=md-nav aria-label="gNMI Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-example class=md-nav__link> GET Example </a> </li> <li class=md-nav__item> <a href=#set-example class=md-nav__link> SET Example </a> </li> <li class=md-nav__item> <a href=#subscribe-once-example class=md-nav__link> SUBSCRIBE once Example </a> </li> <li class=md-nav__item> <a href=#subscribe-on_change-example class=md-nav__link> SUBSCRIBE on_change Example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/jerrodgerth/dc-blueprint/blob/master/docs/mgmt/mgmt-gnmi.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=fabric-management>Fabric Management<a class=headerlink href=#fabric-management title="Permanent link">#</a></h1> <h2 id=gnmi>gNMI<a class=headerlink href=#gnmi title="Permanent link">#</a></h2> <h3 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">#</a></h3> <p>gRPC Network Management Interface (gNMI) is a <a href=https://www.grpc.io>gRPC</a>-based protocol that defines a service or set of services (set of RPC methods) used to configure and retrieve data from network devices. The gNMI gRPC service is comprised of four RPCs: CAPABILITIES, GET, SET and SUBSCRIBE. The gNMI spec and associated protobuf defines the type of messages and the data structures used to get, set or stream information to and from network devices.</p> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>CAPABILITIES</td> <td>Retrieve the set of capabilities that is supported by the server. This allows the client to validate the service version that is implemented and retrieve the set of models that the server supports. The models can then be specified in subsequent RPCs to restrict the set of data that is utilized.</td> </tr> <tr> <td>GET</td> <td>Retrieve a snapshot of data from the server. A Get RPC requests that the server snapshots a subset of the data tree as specified by the paths included in the message and serializes this to be returned to the client using the specified encoding.</td> </tr> <tr> <td>SET</td> <td>Modify the state of data on the server. The paths to modified along with the new values that the client wishes to set the value to.</td> </tr> <tr> <td>SUBSCRIBE</td> <td>Request the server to send it values of particular paths within the data tree. These values may be streamed at a particular cadence (STREAM), sent one off on a long-lived channel (POLL), or sent as a one-off retrieval (ONCE).</td> </tr> </tbody> </table> <h3 id=gnmi-subscription>gNMI Subscription<a class=headerlink href=#gnmi-subscription title="Permanent link">#</a></h3> <p>A gNMI Subscription to a server consists of the following key attributes:</p> <ul> <li>One or multiple paths to subscribe to (what data should be sent to client by server)</li> <li>A subscription mode </li> </ul> <p>gNMI SUBSCRIBE RPC defines three subscription modes:</p> <ul> <li><strong>ONCE:</strong> A subscription to a server is created and a single request is sent. The server creates an update message for the requested path and sends it to the client. The subscription is then terminated.</li> <li><strong>POLL:</strong> A subscription to a server is created for a given path, the client will then send a specific message to the server on a timed interval, upon receipt of this message the server will send the data for the path on which the subscription is created.</li> <li><strong>STREAM:</strong> A subscription to a server is created for a given path, the server is then expected to send data back to the client for that given path in one of three ways, <code>on_change</code>, <code>on_sample</code> or <code>target_defined</code></li> </ul> <h3 id=gnmi-server-configuration>gNMI Server Configuration<a class=headerlink href=#gnmi-server-configuration title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code>--<span class=o>{</span> + running <span class=o>}</span>--<span class=o>[</span> system gnmi-server <span class=o>]</span>--
A:srl2# info detail
    admin-state <span class=nb>enable</span>
    timeout <span class=m>7200</span>
    rate-limit <span class=m>60</span>
    session-limit <span class=m>20</span>
    commit-confirmed-timeout <span class=m>0</span>
    include-defaults-in-config-only-responses <span class=nb>false</span>
    network-instance mgmt <span class=o>{</span>
        admin-state <span class=nb>enable</span>
        use-authentication <span class=nb>true</span>
        port <span class=m>57400</span>
        tls-profile tls-profile-1
    <span class=o>}</span>
    unix-socket <span class=o>{</span>
        admin-state disable
        use-authentication <span class=nb>true</span>
    <span class=o>}</span>
</code></pre></div> <p>Configuration explanation:</p> <p><strong><code>admin-state</code>:</strong> enabled under the global gNMI context it will allow for gNMI to be enabled under network-instances or unix-socket. If disabled, all gNMI servers will be disabled.</p> <p><strong><code>timeout</code>:</strong> specify the number of seconds the a gNMI connection will remain idle before closing the connection </p> <p><strong><code>rate-limit</code>:</strong> set the max number of connection attempts allowed per minute</p> <p><strong><code>session-limit</code>:</strong> sets the limit on the number of simultaneous active gNMI sessions</p> <p><strong><code>network-instance</code>:</strong> specify the network-instance under which a gNMI server should be reachable</p> <p><strong><code>admin-state</code>:</strong> enabled under the network-instance or unix-socket in order to enable or disable an instance of the gNMI server under a given network-instance</p> <p><strong><code>use-authentication</code>:</strong> specifies whether the RPC should be authenticated against a user using aaa_mgr</p> <p><strong><code>port</code>:</strong> specifies the port on which the gNMI server should listen, by default it will listen on 57400</p> <p><strong><code>tls-profile</code>:</strong> a TLS profile must be configured, see TLS workshop for details around configuring the profile itself.</p> <p><strong><code>source-address</code>:</strong> specifies an IP address which the gNMI server will listen on, the IP address must be present in the given network-instance. The IP address can be either IPv4 or IPv6. If set to 0.0.0.0 it will listen on any address within the network-instance for IPv4. If set to :: then it will listen on all IPv4 and IPv6 addresses.</p> <p><strong><code>unix-socket</code>:</strong> specifies whether the RPC should be authenticated against a user using aaa_mgr</p> <h3 id=gnmi-examples>gNMI Examples<a class=headerlink href=#gnmi-examples title="Permanent link">#</a></h3> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <a href=https://gnmic.kmrd.dev>gNMIc</a> client is used for each of these examples. gNMIc is one of several open source gNMI clients available.</p> </div> <h4 id=get-example>GET Example<a class=headerlink href=#get-example title="Permanent link">#</a></h4> <div class=highlight><pre><span></span><code>demo@demo-sf03:~$ gnmic -a <span class=m>172</span>.20.20.2:57400 -e json_ietf -u admin -p admin --skip-verify get --path <span class=s2>&quot;/system/name/host-name&quot;</span>

Get Response:
<span class=o>[</span>
  <span class=o>{</span>
    <span class=s2>&quot;timestamp&quot;</span>: <span class=m>1604412647649136431</span>,
    <span class=s2>&quot;time&quot;</span>: <span class=s2>&quot;2020-11-03T15:10:47.649136431+01:00&quot;</span>,
    <span class=s2>&quot;updates&quot;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&quot;Path&quot;</span>: <span class=s2>&quot;srl_nokia-system:system/srl_nokia-system-name:name/host-name&quot;</span>,
        <span class=s2>&quot;values&quot;</span>: <span class=o>{</span>
          <span class=s2>&quot;srl_nokia-system:system/srl_nokia-system-name:name/host-name&quot;</span>: <span class=s2>&quot;srl1&quot;</span>
        <span class=o>}</span>
      <span class=o>}</span>
    <span class=o>]</span>
  <span class=o>}</span>
<span class=o>]</span>
</code></pre></div> <h4 id=set-example>SET Example<a class=headerlink href=#set-example title="Permanent link">#</a></h4> <div class=highlight><pre><span></span><code>demo@demo-sf03:~$ gnmic -a <span class=m>172</span>.20.20.2:57400 -e json_ietf -u admin -p admin --skip-verify <span class=nb>set</span> --replace /system/name/host-name:::string:::test1

Set Response:
<span class=o>{</span>
  <span class=s2>&quot;timestamp&quot;</span>: <span class=m>1604412698946981257</span>,
  <span class=s2>&quot;time&quot;</span>: <span class=s2>&quot;2020-11-03T15:11:38.946981257+01:00&quot;</span>,
  <span class=s2>&quot;results&quot;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&quot;operation&quot;</span>: <span class=s2>&quot;REPLACE&quot;</span>,
      <span class=s2>&quot;path&quot;</span>: <span class=s2>&quot;system/name/host-name&quot;</span>
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>
</code></pre></div> <h4 id=subscribe-once-example>SUBSCRIBE <code>once</code> Example<a class=headerlink href=#subscribe-once-example title="Permanent link">#</a></h4> <div class=highlight><pre><span></span><code>demo@demo-sf03:~$ gnmic -a <span class=m>172</span>.20.20.2:57400 -e json_ietf -u admin -p admin --skip-verify subscribe --mode once --path <span class=s2>&quot;/system/name/host-name&quot;</span>

<span class=o>{</span>
  <span class=s2>&quot;source&quot;</span>: <span class=s2>&quot;srl1:57400&quot;</span>,
  <span class=s2>&quot;subscription-name&quot;</span>: <span class=s2>&quot;default&quot;</span>,
  <span class=s2>&quot;timestamp&quot;</span>: <span class=m>1604412764363675969</span>,
  <span class=s2>&quot;time&quot;</span>: <span class=s2>&quot;2020-11-03T15:12:44.363675969+01:00&quot;</span>,
  <span class=s2>&quot;updates&quot;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&quot;Path&quot;</span>: <span class=s2>&quot;srl_nokia-system:system/srl_nokia-system-name:name/host-name&quot;</span>,
      <span class=s2>&quot;values&quot;</span>: <span class=o>{</span>
        <span class=s2>&quot;srl_nokia-system:system/srl_nokia-system-name:name/host-name&quot;</span>: <span class=s2>&quot;srl1&quot;</span>
      <span class=o>}</span>
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>
</code></pre></div> <h4 id=subscribe-on_change-example>SUBSCRIBE <code>on_change</code> Example<a class=headerlink href=#subscribe-on_change-example title="Permanent link">#</a></h4> <div class=highlight><pre><span></span><code>demo@demo-sf03:~$ gnmic -a <span class=m>172</span>.20.20.2:57400 -e json_ietf -u admin -p admin --skip-verify subscribe --mode stream --stream-mode on_change --path <span class=s2>&quot;/interface[name=ethernet-1/1]/statistics/in-octets&quot;</span>

<span class=o>{</span>
  <span class=s2>&quot;source&quot;</span>: <span class=s2>&quot;srl1:57400&quot;</span>,
  <span class=s2>&quot;subscription-name&quot;</span>: <span class=s2>&quot;default&quot;</span>,
  <span class=s2>&quot;timestamp&quot;</span>: <span class=m>1604412831614958694</span>,
  <span class=s2>&quot;time&quot;</span>: <span class=s2>&quot;2020-11-03T15:13:51.614958694+01:00&quot;</span>,
  <span class=s2>&quot;updates&quot;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&quot;Path&quot;</span>: <span class=s2>&quot;srl_nokia-interfaces:interface[name=ethernet-1/1]/statistics/in-octets&quot;</span>,
      <span class=s2>&quot;values&quot;</span>: <span class=o>{</span>
        <span class=s2>&quot;srl_nokia-interfaces:interface/statistics/in-octets&quot;</span>: <span class=s2>&quot;16170673&quot;</span>
      <span class=o>}</span>
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>
<span class=o>{</span>
  <span class=s2>&quot;source&quot;</span>: <span class=s2>&quot;srl1:57400&quot;</span>,
  <span class=s2>&quot;subscription-name&quot;</span>: <span class=s2>&quot;default&quot;</span>,
  <span class=s2>&quot;timestamp&quot;</span>: <span class=m>1604412833881891643</span>,
  <span class=s2>&quot;time&quot;</span>: <span class=s2>&quot;2020-11-03T15:13:53.881891643+01:00&quot;</span>,
  <span class=s2>&quot;updates&quot;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&quot;Path&quot;</span>: <span class=s2>&quot;srl_nokia-interfaces:interface[name=ethernet-1/1]/statistics/in-octets&quot;</span>,
      <span class=s2>&quot;values&quot;</span>: <span class=o>{</span>
        <span class=s2>&quot;srl_nokia-interfaces:interface/statistics/in-octets&quot;</span>: <span class=s2>&quot;16170778&quot;</span>
      <span class=o>}</span>
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" title="Back to top" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../mgmt-cli/ class="md-footer__link md-footer__link--prev" aria-label="Previous: CLI" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> CLI </div> </div> </a> <a href=../mgmt-logging/ class="md-footer__link md-footer__link--next" aria-label="Next: Logging" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Logging </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/jerrodgerth target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.expand", "navigation.top", "navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.76f349be.min.js></script> </body> </html>